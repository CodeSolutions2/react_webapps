<!DOCTYPE html>
<html>
<head></head>
<body>

<h1>Rendering HTML elements in hierarchical order</h1>
<div id="JSX_root"></div>

<button id="test_case0_hierarchical_html_elements" onclick="test_case0_hierarchical_html_elements()">One root, one header in hierarchical order</button>
<br> 
<button id="test_case1_hierarchical_html_elements" onclick="test_case1_hierarchical_html_elements()">One root, two headers in hierarchical order</button>
<br> 
<button id="test_case2_hierarchical_html_elements" onclick="test_case2_hierarchical_html_elements()">Two roots, one header in hierarchical order per root</button>

<script src="https://unpkg.com/react/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom/umd/react-dom.development.js"></script>

<script>

const container = document.getElementById('JSX_root');
const root = ReactDOM.createRoot(container);
     
// -------------------------------------------

var list_of_html_keys = [];
var list_of_html_values = [];
var desc_arr1_all = [];
var rowcol = [];
var desc_arr1 = [];

// -------------------------------------------
     
async function test_case0_hierarchical_html_elements() {   
     
     list_of_html_keys = ["nav", "h1", "ul", "li", "li", "li"];
     list_of_html_values = ["", "Header 0", "", "Item 0", "Item 1", "Item 2"];
     
     desc_arr1_all = ['level0_root', 'level1', 'level1_root', 'level2', 'level2', 'level2'];
     rowcol =  ['nav', 'ul'];
     desc_arr1 = ['level0_root', 'level1_root'];
     
     var element = await get_element();
     root.render(element);
}

// -------------------------------------------

async function test_case1_hierarchical_html_elements() {   
     
     list_of_html_keys = ["nav", "h1", "ul", "li", "li", "li", "h1", "ul", "li", "li", "li"];
     list_of_html_values = ["", "Header 0", "", "Item 0", "Item 1", "Item 2", "Header 1", "", "Item 0", "Item 1", "Item 2"];
     
     desc_arr1_all = ['level0_root', 'level1', 'level1_root', 'level2', 'level2', 'level2', 'level2', 'level2_root', 'level3', 'level3', 'level3'];
     rowcol =  ['nav', 'ul', 'ul'];
     desc_arr1 = ['level0_root', 'level1_root', 'level2_root'];
     
     var element = await get_element();
     root.render(element);

}

// -------------------------------------------

async function test_case2_hierarchical_html_elements() {   
     
     await test_case0_hierarchical_html_elements();
     await Reactroot_created_with_JavaScript();
     
}

async function Reactroot_created_with_JavaScript() { 

     // Render a hierarchical root of element
     list_of_html_keys = ["nav", "h1", "ul", "li", "li", "li"];
     list_of_html_values = ["", "Header 1", "", "Item 0", "Item 1", "Item 2"];
     desc_arr1_all = ['level0_root', 'level1', 'level1_root', 'level2', 'level2', 'level2'];
     rowcol =  ['nav', 'ul'];
     desc_arr1 = ['level0_root', 'level1_root'];

     var divElement1 = document.createElement('div');
     container.append(divElement1);
     var element = await get_element();
     const root1 = ReactDOM.createRoot(divElement1);
     root1.render(element);
}

// -------------------------------------------

     



     
// -------------------------------------------
     
async function get_element() {

     var element = desc_arr1.map((row, i) => { 
          return React.createElement(`${rowcol[i]}`, {className: `${rowcol[i]}`, key: `${rowcol[i]}_keyName${i}` }, get_create_element(row)) })
     
     return element;
}

// -------------------------------------------

function get_create_element(row) {

     var start_root_name = row;
     
     // start_root
     // find the index of row in list_of_html_keys
     var start_ind = desc_arr1_all.indexOf(start_root_name) + 1;
     // console.log("start_ind: ", start_ind);
     
     // end_root: find the next root
     var end_shortlist_ind = desc_arr1.indexOf(start_root_name) + 1;
     // console.log("end_shortlist_ind: ", end_shortlist_ind);
     
     var end_root_name = desc_arr1[end_shortlist_ind];
     // console.log("end_root_name: ", end_root_name);

     // Value if not at the end of the node list
     var end_ind = desc_arr1_all.indexOf(end_root_name);
     
     // If at the end of the node list, re-assign end_ind (end_root_name will be undefined)
     if (end_root_name == null || end_root_name == undefined) {
          end_ind = desc_arr1_all.length;
     }
     // console.log("end_ind: ", end_ind);

     var array1 = list_of_html_keys.slice(start_ind, end_ind);
     // console.log("array1: ", array1);
     
     var list_of_html_values_short = list_of_html_values.slice(start_ind, end_ind);
     // console.log("list_of_html_values_short: ", list_of_html_values_short);
     
     // return the items between start_root and end_root
     return array1.map((row, i) => { 
          return React.createElement(`${row}`, {className: `${row}`, key: `${row}_keyName${i}` }, list_of_html_values_short[i]) })
}

// -------------------------------------------

     
</script>

</body>
</html>
