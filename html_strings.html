<!DOCTYPE html>
<html>
<head></head>
<body>

<div id="JSX_root"></div>
<div id="JavaScript_root"></div>
     
<button id="react_basics0" onclick="react_basics0()">React.js in JavaScript</button>
<button id="javascript_code" onclick="javascript_code()">JavaScript using htmlStrings</button>
     
<script src="https://unpkg.com/react/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom/umd/react-dom.development.js"></script>

<script>

async function react_basics0() {
     
     // This works, but it is not easy to use. In node.js, one can assign a DOM html string directly to a variable.
     // const element = React.createElement('div', {className: 'div_name'}, 
     //      React.createElement('h1', {className: 'div_name'}, 'Header Text'), 
     //     React.createElement('p', null, 'Paragraph Text'));

     // OR
     
     // Incorrect
     // const htmlString = `<nav>
     //    <h1>Exploring navbar using React in JavaScript</h1>
     //      <ul><li>Item 0</li>
     //         <li>Item 1</li>
     // </ul></nav>`;
     // const element = React.createElement(htmlString);
     
     // OR

      // Incorrect Uncaught SyntaxError: expected property name, got '{'
     //  const htmlString = `<nav>
    //      <h1>Exploring navbar using React in JavaScript</h1>
     //       <ul><li>Item 0</li>
    //            <li>Item 1</li>
    //  </ul></nav>`;
     // const element = React.createElement('div', null, dangerouslySetInnerHTML={{ __html: htmlString }});

     // OR
     
     // So the useEffect runs when the variable htmlString changes
     const htmlString = `<nav>
        <h1>Exploring navbar using React in JavaScript</h1>
          <ul><li>Item 0</li>
              <li>Item 1</li>
    </ul></nav>`;
     
     // Idea 0
     const [htmlString, sethtmlString] = React.useState([]);

     // Idea 1
     // const containerRef = useRef();
     
     React.useEffect(() => {
          
           const fragment = document.createRange().createContextualFragment(htmlString);

          // Idea 0
          let nodes;
          // I guess it loops over each of the html elements in htmlString and assigns each one to a node
          if (nodes.current && fragment) {
               nodes = [...fragment.children];
               nodes.current.appendChild(fragment);
          }
          // Then remove the node from the parentElement
          return () => { nodes.forEach((node, ind) => node.parentElement.removeChild(node);) };

          // Idea 1
          // containerRef.current.appendChild(fragment);
          
     }, [htmlString]);

     // Idea 0
     const element = React.createElement('div', null, htmlString);
     
     // Idea 1
     // const element = React.createElement('div', null, ref={containerRef});

     
    // -----------------------------------------
  
     const container = document.getElementById('JSX_root');
     const root = ReactDOM.createRoot(container);
     root.render(element);
}

async function javascript_code(){
     
     // Way 0: works
    //  const h1 = document.createElement("h1");
     // h1.textContent = 'Header Text';
     // const p = document.createElement("p");
     // p.textContent = 'Paragraph Text';
    // const container = document.getElementById('JavaScript_root');
    // container.appendChild(h1);
    // container.appendChild(p);

    // -----------------------------------------
  
    // OR

     // Way 1: works
     const htmlString = `<nav>
        <h1>Exploring navbar using React in JavaScript</h1>
          <ul><li>Item 0</li>
              <li>Item 1</li>
              </ul></nav>`;

     // -----------------------------------------

     // Finally the navbar!
    const htmlString = `<nav className="navbar navbar-expand-lg navbar-light bg-light">
                             <a className="navbar-brand" href="">Navbar example!</a>
                         <button className="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
     <span className="navbar-toggler-icon"></span></button>
  </nav>`;
     
    var htmlNode = document.createRange().createContextualFragment(htmlString);
    
     const container = document.getElementById('JavaScript_root');
     container.appendChild(htmlNode);
     
}

</script>

</body>
</html>
